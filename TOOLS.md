# 房产估价 MCP 服务工具定义

## 简介

欢迎使用房产估价 MCP 服务。本项目基于模型上下文协议（Model Context Protocol, MCP）构建，提供了一系列与房产估价相关的工具，旨在为大语言模型或智能体提供精准、可靠的房产数据支持。

客户端可以通过 MCP 标准的 `tools/list` 请求获取所有可用工具的列表和定义，并通过 `tools/call` 来调用这些工具。

## 授权

本服务的调用需要通过 `MCP-INDUSTRY-APPID` 进行授权。客户端在与本服务建立连接或发送请求时，需要在请求的 `headers` 中包含有效的 `MCP-INDUSTRY-APPID`。

## 🗺️ 工具清单

```json
{
  "mcpServers": {
    "cih-property-valuation": {
      "transportType": "sse",
      "url": "http://10.32.188.133:33134/sse",
      "headers": {
        "MCP-INDUSTRY-APPID": "您的APPID"
      }
    }
  }
}
```

本服务目前提供以下工具：

### 1. 获取小区评级 (get_community_rating)

**功能描述**

根据小区名称查询住宅小区评级，包括小区评级、活跃度评级、物业评级、教育评级、板块评级。

**输入参数 (`inputSchema`)**

| 参数名           | 类型     | 是否必须 | 描述                                                             |
| :--------------- | :------- | :------- | :--------------------------------------------------------------- |
| `city`           | `string` | 是       | 所在城市，例如：“北京”                                           |
| `district`       | `string` | 是       | 所在区县，例如：“丰台区”。（若缺失，建议客户端通过联网搜索补全） |
| `community_name` | `string` | 是       | 小区名称，例如：“中海丰和叁号院”                                 |

**输出 (`output`)**

一个包含了小区各项评级信息的文本字符串。

### 2. 获取小区评估价格 (get_community_valuation)

**功能描述**

提供住宅小区的历史和当前均价信息。

**输入参数 (`inputSchema`)**

| 参数名           | 类型     | 是否必须 | 描述                                                                   |
| :--------------- | :------- | :------- | :--------------------------------------------------------------------- |
| `city`           | `string` | 是       | 所在城市，例如：“北京”。（参数缺失时不能杜撰，可以以对话形式询问确认） |
| `district`       | `string` | 是       | 所在区县，例如：“丰台区”。（若缺失，建议客户端通过联网搜索补全）       |
| `community_name` | `string` | 是       | 小区名称，例如：“中海丰和叁号院”                                       |
| `start_time`     | `string` | 否       | 开始时间，格式为 `yyyy-mm`。为空时返回最新月份数据。                   |
| `end_time`       | `string` | 否       | 结束时间，格式为 `yyyy-mm`。为空时返回最新月份数据。                   |

**输出 (`output`)**

一个包含了指定时间范围内小区评估价格信息的文本字符串。

### 3. 获取房产评估价格 (get_property_valuation)

**功能描述**

根据房产的详细信息，返回其估值总价与估值单价。

**输入参数 (`inputSchema`)**

| 参数名           | 类型      | 是否必须 | 描述                                                                   |
| :--------------- | :-------- | :------- | :--------------------------------------------------------------------- |
| `city`           | `string`  | 是       | 所在城市，例如：“北京”。（参数缺失时不能杜撰，可以以对话形式询问确认） |
| `district`       | `string`  | 是       | 所在区县，例如：“丰台区”。（若缺失，建议客户端通过联网搜索补全）       |
| `community_name` | `string`  | 是       | 小区名称，例如：“中海丰和叁号院”                                       |
| `orientation`    | `string`  | 是       | 房屋朝向，例如：“南北”。（参数缺失时不能杜撰，可以以对话形式询问确认） |
| `floor_area`     | `number`  | 是       | 建筑面积，单位：㎡。（参数缺失时不能杜撰，可以以对话形式询问确认）     |
| `located_floor`  | `integer` | 是       | 所在楼层。（参数缺失时不能杜撰，可以以对话形式询问确认）               |
| `total_floors`   | `integer` | 是       | 总楼层数。（参数缺失时不能杜撰，可以以对话形式询问确认）               |

**输出 (`output`)**

一个包含了房产估值总价和单价的文本字符串。

## 错误处理

当工具调用失败时，服务将返回一个 `isError: true` 的响应，并在 `content` 中包含错误信息，格式如下：

```json
{
  "content": [
    {
      "type": "json",
      "json": {
        "error": true,
        "message": "具体的错误信息",
        "tool": "被调用的工具名称"
      }
    }
  ],
  "isError": true
}
```
